{"componentChunkName":"component---src-templates-blog-article-js","path":"/article/202009-raspi-os","result":{"data":{"microcmsArticles":{"title":"Raspberry PiでDiscordボットを作る(1) OSセットアップ","body":"<p>今回はRaspberry PiにLinux系OSをセットアップし、同じWi-fiネットワークにつながったPCからリモートログインできるようにするまでの手順を示します。<br></p><h2 id=\"hacedadb39e\">用意するハードウェア</h2><p>Raspberry Pi本体、Micro SDメモリカード(SDHC, 16GB以上推奨)と、Raspberry Pi用ケースを用意します。<br>今は教育用にRaspberry Piを使うのが大流行りのようで、Amazonで探すと<a href=\"https://www.amazon.co.jp/s?k=raspberry+pi+4\" target=\"_blank\" rel=\"noopener noreferrer\">Raspberry Pi用ケースやMicro SDカード付きのセット</a>が大量に見つかります。<br>セットアップ時には外付けキーボードとPC用ディスプレイ(またはテレビ)も必要です。<br></p><h2 id=\"h69dd53aa05\">Raspberry Pi OSをダウンロード</h2><p>空のMicroSDメモリカードをPCに挿入し、<a href=\"https://www.sdcard.org/jp/downloads/formatter/\" target=\"_blank\" rel=\"noopener noreferrer\">SDカードフォーマッター</a>でフォーマットします。フォーマットの実行と並行して、<a href=\"https://www.raspberrypi.org/downloads/\" target=\"_blank\" rel=\"noopener noreferrer\">Raspberry Pi財団のサイト</a>からRaspberry Pi OSとRaspberry Pi Imagerをダウンロードします。</p><h3 id=\"ha032940786\">Raspberry Pi OSのイメージ、どれがいい?</h3><p>今回のサーバ用途では、最小構成(デスクトップ環境なし)でも十分です。<br></p><h2 id=\"h6833811c65\">イメージのチェックサム確認(オプション)</h2><p>大きなファイルをダウンロードしたとき、まれに回線のノイズなどによりファイルが壊れてしまう場合があります。<br>ファイルが壊れているかを確かめる方法に、以下に述べる「チェックサムの確認」があります。<br>Raspberry Pi OSのダウンロードページの「Download ZIP」ボタンの下に「SHA-256」と英数字の文字列があります。<br>これはイメージファイルが正常にダウンロードされたかを確かめるための「チェックサム」と呼ばれるデータです。<br>ダウンロードしたファイルをLinux上 (Windows WSLでも可) で、以下のコマンドを入力して数分待つと、ダウンロードしたファイルのチェックサムが表示されます。</p><pre><code> shasum -a 256 2020-08-20-raspios-buster-armhf-lite.zip</code></pre><p>表示されたチェックサムがダウンロードページ内に記されたものと同じであれば、ダウンロード成功です。<br></p><h2 id=\"h765eec90b0\">Micro SDカードへの書き込み</h2><p>ダウンロードしたRaspberry Pi Imagerをインストールします。Raspberry Pi Imagerを起動して[Choose OS]ボタンを押して[Operation System]の一番下にある[Use Custom]を選んで、別途ダウンロードしたイメージファイルを開きます。<br><br><img src=\"https://images.microcms-assets.io/protected/ap-northeast-1:9e5272dd-7b4e-43ed-93af-2c67006519ff/service/og-blog/media/image-644x433.png\" alt><br><br>[CHOOSE SD CARD]でPCに挿入したMicro SDカードを選び、[WRITE]で書き込みを行います。書き込み処理は場合にもよりますが数分から数十分ほどかかります。</p><h2 id=\"h375153af28\">Raspberry Pi本体の起動</h2><p>書き込みが終わったらPCからmicro SDカードを取り出し、Raspberry Piにmicro SDカードを挿入します。<br>基板の裏側、LANコネクタの反対側にmicro SD用挿入口があります。<br><br><img src=\"https://images.microcms-assets.io/protected/ap-northeast-1:9e5272dd-7b4e-43ed-93af-2c67006519ff/service/og-blog/media/IMG_20200913_101335.jpg?w=345&h=460\" alt=\"Raspberry Piの裏側、Ethernetコネクタの反対\"><br><br>Micro SDカードを挿入したらキーボードとディスプレイを接続し、本体のUSBタイプCコネクタに電源用USBケーブルを接続して起動します。<br>起動すると初回のセットアップ画面が出ますので国と言語、パスワードとWi-fiの設定をします。<br>各種ソフトウェアのアップデートを勧められますので、アップデートもやっておきましょう。<br></p><h2 id=\"h6eb60043c6\">ネットワークログインの設定</h2><p>ネットワークログインの設定は、前回の自作機と同様にマルチキャストDNS(avahi-daemon)とSSHの有効化によって行います。SSHはルートディレクトリ直下にsshディレクトリを置くことで有効化できます。</p><pre><code>sudo apt install avahi-daemon\nsudo mkdir &#x2F;ssh</code></pre><p>マルチキャストDNSのホスト名はデフォルトでraspberrypiになっていますが、他のRaspberry Piと被らないようホスト名を変えておきます。</p><pre><code>sudo nano &#x2F;etc&#x2F;hostname</code></pre><p>ここまで完了したら再起動して、PCのSSHクライアント (WSL環境またはMacのターミナルのSSH、またはTeraTermなど) からログインをしてみましょう。<br>SSHクライアントの設定は</p><pre><code>ホスト名 : &lt;&#x2F;etc&#x2F;hostnameで設定した名前&gt;.local\nユーザー名 : pi\nポート番号 ：22</code></pre><p>でログインできるはずです。<br></p>","slug":"202009-raspi-os","publishedAt":"2020年9月15日","writer":"Oganesson","tags":[{"name":"ハードウェア","slug":"hardware"},{"name":"環境構築","slug":"environment"}]}},"pageContext":{"slug":"202009-raspi-os"}},"staticQueryHashes":["272570591","3000541721","3649515864"]}